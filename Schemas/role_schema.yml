title: role
$id: objectDefs/role
$schema: 'http://json-schema.org/draft-07/schema'
type: object

"properties":
  "role number":
    type: string
    description: This is also known as the "tag number", if it is an asset role.

  "role name":
    const: >
      ${properties."role class".properties."class name"};
      childOf: ${properties."parent entity".properties."role number"};
      serving: ${properties."client role served".properties."role number"};
    description: A description of the role, in terms of its relations to its parent role and the roles that it presently serves
    # MT []: would you like me to move this into individual roles?

  "parent":
    $ref: .objectDefs/role
    description: the parent role

  "role class":
    $ref: .IBM_Maximo_object/classifcationObject
    description: this field specifies the class of asset that is suppose to occupy this role
    $comment: >
      this field allow the user to specify what the equipment does in the system instead of what the equipment is. For example, for generators, instead of 
        * generator
          * diesel generator
          * natural gas generator
      we would have
        * generator role
          * emergenecy generator role
          * backup generator role
      8/24:
        [ ]TH: idea to be taken up with DM and GI. If idea is good, need to add new classification
  
  "status":
    type: string
    trackHistoryFlag: TRUE
    enum:
      - planned
      - realized
      - eliminated
    $comment: >
      this field allows the user to specify whether the role is merely a concept in the design stage -i.e., "planned", or whether the system around it and supports for it have been contructed, and it is occupieable by an asset - i.e. "realized".


  "client role served":
    $ref: .objectDefs/role
    description: >
      Specifies the role (more precisely the asset serving in the role), that this role is serving
      Form example, if the present role is that of a valve, then its client may be a pump.
    # If we have a valve role, the client that it serves may be a pump role.

  "role technical requirement description":
    ref: string
    description: >
      A free text description of the performance requirements of the role. 
      For example, weight in kg for a lifting device.
    # Eventually, this should be formalized as properties of the specific role class. For example horsepower for motor class
    # For now, this can be entered as a free text
    # AK []: would you like me to move this into individual roles?
  
  "located in space":
    $ref: .objectDefs/space
    trackHistoryFlag: TRUE

  "operator group":
    $ref: .IBM_Maximo_object/group
    trackHistoryFlag: TRUE
    description: group responsible for the operation of the asset, serving in this role

  "service address or coordinate":
    $ref: .IBM_Maximo_object/serviceAddress
    trackHistoryFlag: TRUE
    description: x and y coordinate, or the street address

  "operational criticality":
    type: string
    enum:
      - "1"
      - "2"
      - "3"
      - "4"
      - "5"

  "hazard criticality":
    type: string
    enum:
      - "1"
      - "2"
      - "3"
  
  "GIS object ID":
    type: string
    description: This is the ID of the equivalent object (asset or role) in GIS. Having this value suggests that the original record was created in GIS and was copied over to WMS through the data integration link. 

  ################################## RULES ##################################
  if:
    oneOf:
      - roleClass:
          properties:
              className:
                const: "pumping station"
      - roleClass:
          properties:
              className:
                const: "water treatment plant"
      - roleClass:
          properties:
              className:
                const: "large chamber"
  then:
    required:
      - 
#There could be more specialized roles, such as sensor roles [monitoring] breaker roles [tie-breaker]
#To be represented
# - each role can only be occupied by a single asset, unless it is a collection
# commissioning date should be written into the record of the equipment and the role. 