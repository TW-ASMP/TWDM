---
$schema: "http://json-schema.org/draft-07/schema#"
title: physical-location
$id: https://raw.githubusercontent.com/TW-ASMP/TWDM/main/1-Schemas/A-entity_record_schema/03_physical-location.yml
type: object

properties:
  
  ID:
    P3_MVP: true
    type: string
    description: An unique ID
    $comment: In the future, this value should be validated with a regular expression.

  parent:
    P3_MVP: true
    $ref: "./03_physical-location.yml"
    description: The larger physical-location that completely contains this physical-location.

  name:
    P3_MVP: true
    type: string
    description: Short name. Should be one that is commonly use by staff in communication. For example, "boardroom"

  complete_name:
    P3_MVP: true
    read-only: true
    description: Automatically generated by the system and not editable. The value is name to that of its parent, its grandparent ... all the way up that facility physical-location. 
    type: string
    RULE_SPEC:
      - spec_ID: 
        name: complete name generation
        id: 01JFVNS0YDFD7K5DP4NVMSKTY8

  enclosed_by_asset:
    P3_MVP: false
    oneOf: [$ref: "./01_asset.yml", type: null]
    description: indicates that the physical-location is what is enclosed by (and immediately surrounding) the asset, such as a 
      - building, 
      - structural tank, 
      - equipment cabinet,
      - vehicle

  class:
    P3_MVP: true
    $ref: "../B-entity_class_object_schema/03_physical-location_class.yml"

  specification_data:
    P3_MVP: true
    type: object
    description: is a set of specification property data. (The applicable properties are dependent on the definition made in the chosen class.)

  inferred_classes:
    P3_MVP: false
    oneOf: 
      - type: array
        items:
          $ref: "../B-entity_class_object_schema/03_physical-location_class.yml"
      - type: null
    read-only: true

  service_address: 
    P3_MVP: true
    oneOf: 
      - $ref: MaximoServiceAddressObject
      - type: null
    $comment: this is referencing Maximo's native service address object

  status:
    type: string
    enum:
      - specified
      - realized
      - eliminated
    $comment: |
      This field allows the user to specify whether the physical-location is merely specified, or whether the boundary enclosing the physical-location have been constructed (or alternatively, the fiat property / or area boundary around is formally established and approved.) - i.e. "exists".
      Note that an "eliminated" physical-location should be removed from the hierarchy, and should not be visible for users conducting maintenance, reliability, planning and scheduling functions.
      The term "eliminated" is chosen to indicate that physical-location disappear by the fact that object bound or defined the physical-location, such as wall, ceilings, or property lines are removed. 

  confined_space:
    P3_MVP: false
    type: boolean

  inherit_hazardous_property_values:
    P3_MVP: false
    type: boolean
    default_value: true

  hazardous location class:
    P3_MVP: false
    type: string
    enum:
      - I
      - II
      - III

  hazardous location division:
    P3_MVP: false
    type: string
    enum:
      - 1
      - 2

  hazardous location group:
    P3_MVP: false
    type: string
    enum:
      - A
      - B
      - C
      - D
      - E
      - F
      - G

  # COMMON RECORD PROPERTIES

  duplicate_record_of:
    P3_MVP: true
    $ref: "./00_common_definitions.yml#/definitions/duplicate_record_def"
  
  record_retirement_information:
    P3_MVP: true
    $ref: "./00_common_definitions.yml#/definitions/record_retirement_def"
  