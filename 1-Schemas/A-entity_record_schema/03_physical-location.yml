---
$schema: "http://json-schema.org/draft-07/schema#"
$id: https://raw.githubusercontent.com/TW-ASMP/TWDM/main/1-Schemas/A-entity_record_schema/03_physical-location.yml
type: object

properties:
  
  ID:
    description: An unique ID. For example LOC:THC-BLD1-RM1
    read-only: true
    type: string
    maxLength: 60
    RULE_SPEC:
      - name: generate the ID, hierarchically, from ID segments
        spec_ID: Nk68andYfx
        type: [automation]
        automation_note: must live-update whenever the "ID_segment" or "parent" value changes
        specification: |
          Given the present physical location, PLx,
          If PLx is a space within the physical location of a facility
            ID value starts with "LOC:" and followed by the the concatenation, delimited by "-", of the "ID_segment" of all of PLx's ancestors, up to the facility physical location (i.e., the ancestor classified as "entire space of a facility")
          else
            ID value starts with "LOC:" and followed by the ID_segment. 

  complete_description:
    description: Automatically generated by the system and not editable. The value is name to that of its parent, its grandparent ... all the way up that facility physical-location. 
    read-only: true
    type: string
    RULE_SPEC:
      - name: generate the complete description, hierarchically, from description segments
        spec_ID: EJmeYI_tze
        type: [automation]
        automation_note: must live-update whenever the "description" or "parent" value changes
        specification: |
          Given the present physical location, PLx, the "complete_description" is the concatenation - delimited by " / " - of the "description_segment" of all of PLx's ancestors, up to the facility physical location (i.e., the ancestor classified as "entire space of a facility")
          e.g,. "Boardroom / Administrative Building / Highland Creek Wastewater Treatment Plant"

  parent:
    description: The larger physical-location that completely contains this physical-location.
    $ref: "#"
  
  ID_segment:
    description: The ID segment that represents physical location. For example RM101 for a storage room 
    type: string
    maxLength: 6

  description_segment:
    description: The short incremental name of the location. For example, "boardroom"
    type: string
    maxLength: 30
  
  class:
    $ref: "../B-entity_class_object_schema/03_physical-location_class.yml"

  space_is_enclosed_by_asset:
    description: indicates that the physical-location is what is enclosed by (and immediately surrounding) the asset, such as a building, structural tank, or vehicle.
    oneOf:
      - type: null
      - $ref: "./01_asset.yml"

  service_address: 
    oneOf: 
      - $ref: MaximoServiceAddressObject
      - type: null
    $comment: this is referencing Maximo's native service address object

  status:
    type: string
    enum:
      - specified
      - realized
      - eliminated
    $comment: |
      This field allows the user to specify whether the physical-location is merely specified, or whether the boundary enclosing the physical-location have been constructed (or alternatively, the fiat property / or area boundary around is formally established and approved.) - i.e. "exists".
      Note that an "eliminated" physical-location should be removed from the hierarchy, and should not be visible for users conducting maintenance, reliability, planning and scheduling functions.
      The term "eliminated" is chosen to indicate that physical-location disappear by the fact that object bound or defined the physical-location, such as wall, ceilings, or property lines are removed. 

  # COMMON RECORD PROPERTIES

  duplicate_record_of:
    $ref: "./00_re-used_object_property_definitions.yml#/definitions/duplicate_record_def"
  
  record_retirement_information:
    $ref: "./00_re-used_object_property_definitions.yml#/definitions/record_retirement_def"
  