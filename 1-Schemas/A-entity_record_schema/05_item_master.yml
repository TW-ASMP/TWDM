---
$schema: "http://json-schema.org/draft-07/schema#"
title: item master
$id: https://raw.githubusercontent.com/TW-ASMP/TWmaximoConfig/main/1-Schemas/A-entity_record_schema/05_item_master_schema.yml
type: object

properties:
  
  item number:

    type: string
    description: 
      A read-only UUID, generated by the system, to uniquely identify the item.
    $comment: |
      UUID instead of a simple serial used with the consideration that we may in the future incorporate items defined outside of TW.
  
  #========================
  
  item name:

    type: string
    description: The human readable short description of the item.
    
    TW_rule:
    
      - name: item master record naming
        id: VkYgCtRPlx
        type: assertion
        specification: |
          if (item_x.properties."generic_or_specific_product") = "generic", then  
            the value of (item_x.properties."item name") would be the semi-colon ("; ") delimited concatenation of the following property values:
              - properties."item class".properties."class name"
              - properties."description of generic"
          elif: (item_x.properties."generic_or_specific_product" = "commercially available product"), then: 
            the value of (item_x.properties."item name") would be the semi-colon ("; ") delimited concatenation of the following property values:
              - properties."item class".properties."class name"
              - properties."product manufacturer company".properties."company name"
              - properties."product_model_and_sub-model"
              - properties."model year or product version designator"
              - properties."product configuration code"
        checked_on: 2024-08-15
  
  #========================
  
  item class:

    $ref: "../B-entity_class_object_schema/01_asset_item_tool_class.yml"
    $comment: This is a value from the item classification, which is a superset of the asset class.

    TW_rule:
    
      - name: item classification list includes all classes
        id: EynXVZ-dxg
        specification: |
          Maximo item classification list would include all class instances of B-entity_class_object_schema/01_asset_item_tool_class_object_schema.yml, regardless of the values
            - properties."tool"
            - properties."only used as a part asset"
        status: specified
        checked_on: 2024-08-15


# INVENTORY MANAGEMENT FLAGS
  #========================

  stocked_at_TW:
    
    $ref: "./101_common_definitions.yml#/definitions/stocked_at_TW_property_def" 
          
  rotating:
    
    $ref: "./101_common_definitions.yml#/definitions/rotating_property_def" 


# generic and specific definition
  #========================

  generic_or_specific_product:
    type: string
    description: indicate whether the item is defined generically in terms of its function or commodity specification or is defined or specifically in term of its product detail.
    enum:
      - generic
      - commercially available product
    $comment: |
      A generic item appropriate for a certain application is a "defined application generic" item. 
    TW_rule:
      - name: Restrict Issuing a Generic Item
        id: 4yDfkRcvlg
        specification: ""
        status: TBS

  #========================
  
  description of generic:
    type: string
    description: For example, 14' 165/55R14 winter tire, or electrical feeder protection relay
  
# MANUFACTURER AND MODEL GROUP
  #========================

  manufacturer_model_configuration_information:
    oneOf: [type: null, $ref:"$ref: "./101_common_definitions.yml#/definitions/manufacturer_and_model_definition"]
    
    # referend defintion contains 

      # manufacturer:

      # product_model_and_sub-model:

      # model year or product version designator:

      # product configuration code:
      
      # manufacturer part number:

  #========================
  
  product is an instance of the generic(s):
    
    oneOf: 
      - type: null
      - $ref: "./06_tool_master.yml"
    description:
  
  #========================
  
  exact same product as:
    oneOf: 
      - type: array
        items:
          $ref: "./04_item_master.yml"
      - type: null
    description: |
      Identifies the same commercial product item made by the same manufacturer, but differing only in item unit format. For example, the 208-litre drum item and the 5-litre bottle item of Penzoil 5W30 Synthetic Lubricant. 
    
    TW_rule:

      - name: Infer Symmetrical Equivalence between Product Items
        id: EJCnUukuex
        type: inference
        specification: ""
        status: to be specified

  #========================
  
  ordering information:

    oneOf:
      - type: array  # array type indicates the possibility of multiple pieces of ordering information
        items:
          $ref: "#/definitions/vendor order detail"
      - type: null

  #========================

  item issue unit:

    type: string
    description: A description of each indivdual unit issued for work, such as a can or roll, of the product item, regardless of the ordering unit, such as a box of 24.  For example, "80 ml can" or "27 x 500in. roll".
    $comment: "To implemeneter: use the out of the box list from Maximo"

  #========================

  duplicate record of:

    oneOf: 
      - type: array
        items:
          $ref: "./05_item_master.yml"
      - type: null



#========================
# DEFINITIONS
#========================

definitions:

  vendor order detail:

    properties:
      
      vendor company:
        
        $ref: MaximoCompanyObject
      
      #========================
      
      order unit format:
        
        oneOf:
          - type: null
          - type: string
        description: A description of each indivdual unit of order, such as a can or roll, of the product item, regardless of the ordering unit, such as a box of 24.  For example, "80 ml can" or "27 x 500in. roll".
        $comment: |
          For a commercial product, if there are multiple item unit formats, one item should be create for each format.
          To Implementer,
            Use Maximo's defaults
      
      #========================
      
      vendor item or SKU number:
        
        oneOf:
          - type: string
          - type: null
      
      #========================
      
      unit cost in CAD:
        
        type: number
        description: The expected cost of a unit of the item. (This should not be the cost of a package of multiple units of the item.) 
        $comment: To TW, in the future, this field should contain a running average of the recent purchase costs, possibly also adjusted for recent inflation.


  # 6/25: [] we need to add another field for lead time. This will contribute to the dynamic calculation of criticality among other uses. 