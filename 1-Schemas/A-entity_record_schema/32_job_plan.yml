---
$schema: http://json-schema.org/draft-07/schema#
title: Job Plan
description: |
  A job plan is the the lowest level of work description to contain the full planning specifications. 
type: object 

properties:

  job_plan_id:
<<<<<<< Updated upstream
    
    description:
    type:
    $comment: this is akin to the activity procedure ID, such as FISELS201, in Avantis.
    
=======

    $comment: This is equivalent to activity procedure ID, such as FISELS201, in Avantis.
  
>>>>>>> Stashed changes

  #================

  failure_mode_codes:

    oneOf:
      - type: NULL
      - type: array
        items: string
    $comment: This optional field contains one or more RCM failure mode
  
  #================

  job_plan_name:

    description: 
    type: string

  #================

  job_plan_type:
    
    description: 
    type: string
    enum:
      - discrete
      - composite
    $comment: A composite job plan is made up of discrete job plans, its planning details are not directly specified. Instead, they are aggregated from its discrete job plan parts.
    # [] rule planning detail of job plans are not to be directly specified

  #================

  is_based_on:

    oneOf:
      - type: NULL
      - $ref: "./32_job_plan.yml"
    $comment: This field is likely updated by an integrated solution that manages the job plan definitions and relations between generic and specific job plans.

  #================

  procedure_steps:

<<<<<<< Updated upstream
    description: 
    type: string
    
    $comment: In the future, each step can be represented as a task.
=======
    type: string
    $comment: If mobile is used, each step may be represented as a job plan task.
>>>>>>> Stashed changes

  #================

  estimated_wrench_time:

  #================

  activity_class:

    $ref: "../B-entity_class_object_schema/32_discrete_activity_class.yml"
    
# Resource Group
  #====================
  
  required_tool:
  
    description: Tool(s) needed to complete the work
    oneOf:
      - type: NULL
      - type: array
        items:
          - $ref: "./101_common_definitions.yml#/definitions/tool_requirement_definition"
    $comment: the tools can be stocked or unstocked. 

  required_item:
    
    description: Parts and material needed to complete the work
    oneOf:
      - type: NULL
      - type: array
        items:
          - $ref: "./101_common_definitions.yml#/definitions/item_requirement_definition"

  required_service_contract_item:

    oneOf:
      - type: NULL
      - type: array
        items:
          - $ref: "./101_common_definitions.yml#/definitions/service_contract_item_definition"

  required_trade:
  
  required_qualification:

    description: the required qualification and license 
  
# Concrete Job Plan Spec Group
  #====================

  specific_to_site:

    $comment: ?? may be supervisor does not need to be specified, if it always follow the crew.

  recommended_triggering:

# Trigger Condition Description Group
  #=====================
  
  recommended_frequency_number:  
  
  #================

  recommended_frequency_UOM:

    description:
    $comment:
  
  #================

  trigger_in_relation_to_event:

    type: object
    properties: 

      preposition:
        enum:
          - after
          - before
          - during
      
      date:

      event:

# Environment Safety Or Quality (ESQ) Requirements Group
  #====================
  ESQ_requirement:

    oneOf: 
      - type: NULL
      - type: array
        items:
          - $ref: "#/definitions/ESQ requirement"
    $comment: |
      "[] ASMP do we need to represent multiple ESQ requirements"
          
  highest ESQ requirement level:
    oneOf: 
      - type: NULL
      - $ref: "#/definitions/ESQ requirement type"
    

##########################################################
# DEFINITIONS
##########################################################
definitions:

## ESQ Group ##  
  #====================
  ESQ requirement type:
    type: string
    enum:
      - legislative
      - corporate safety policy
      - professional recommendation
  
  #====================
  ESQ requirement:
    
    #====================
    requirement name:
      type: string
      $comment: "For example, 'ANSI Z358.1-2014 on weekly inspection of self-contained emergency wash equipment'."

    #====================
    requirement type:
      $ref: "#/definitions/ESQ requirement type"

    #====================
    requirement description:
      type: string
      $comment: |
        Example Text:
        .6.3 Self-contained emergency showers shall be visually checked weekly to determine if flushing fluid needs to be changed or supplemented. Such inspection shall be conducted in accordance with manufacturer's instructions.
        5.5.3 Self-contained eyewashes shall be visually checked weekly to determine if flushing fluid needs to be changed or supplemented. Such inspection shall be conducted in accordance with manufacturer's instructions.
        6.5.3 Self-contained eye/face washes shall be visually checked weekly to determine if flushing fluid needs to be changed or supplemented. Such shall be conducted in accordance with manufacturer's instructions.
        7.5.3 Self-contained combination units shall be visually checked weekly to determine if flushing fluid needs to be changed or supplemented. Such inspection shall be conducted in accordance with manufacturer's instructions.
        8.1.3.2 All personal wash units shall be inspected and maintained in accordance with manufacturer's instructions and shall meet applicable regulatory requirements.
        8.2.4.3 Self-contained drench hoses shall be visually checked weekly to determine if flushing fluid needs to be changed or supplemented. Such inspection shall be conducted in accordance with manufacturer's instructions.

## Trigger Group ##
  #====================
  trigger condition description: 
    preposition:
    event description:


      
Notes:

$comment: |
  [] don't forget how tools need to be summed up in different ways.
  [] Intent to Exclude the default WO classes: activty, change, release, and WO from our implementation. This Maximo stock classification is poorly defined (too much overlap)
  [] It is perhaps just as important to specify when we will not use.